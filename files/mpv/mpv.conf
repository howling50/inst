# -----------------------------------------------------------------
# Global Settings
# -----------------------------------------------------------------

# Detect auto-option malfunctions
dither-depth=auto
x11-bypass-compositor=never

# Save playback position on quit
save-position-on-quit

# Allow composite detection for VDPAU video output
vo-vdpau-composite-detect

# -----------------------------------------------------------------
# Caching and Stream Quality
# -----------------------------------------------------------------

# Use automatic caching (and use maximum bitrate for HLS streams)
cache=auto
hls-bitrate=max   # use max quality for HLS streams

# -----------------------------------------------------------------
# Video & Display Settings
# -----------------------------------------------------------------

# Set monitor aspect ratio to 16:9 (e.g. for 1920x1080)
monitoraspect=16:9
# Resize window if it exceeds 50% of screen width/height
autofit-larger=90%x90%
geometry=50%:50%
# Enable deinterlacing (set to "no" if not needed)
#deinterlace=yes

# -----------------------------------------------------------------
# Audio Settings
# -----------------------------------------------------------------

# Enable fuzzy matching for external audio files
audio-file-auto=fuzzy
# Correct pitch when playback speed is changed
audio-pitch-correction=yes
# Set maximum volume to allow up to 130% (amplification above 100%)
volume-max=130
# Default playback volume (100 is neutral)
volume=90
# Use a moderate pulse audio buffer to reduce seeking issues
pulse-buffer=50
# Force stereo output
audio-channels=stereo
# Normalize and downmix multichannel audio if necessary
audio-normalize-downmix=yes

# -----------------------------------------------------------------
# Language Preferences
# -----------------------------------------------------------------

# Subtitle language priority (highest to lowest)
slang=eng,en,enUS,en-US
# Audio track language priority
alang=jpn,jp,eng,en,enUS,en-US

# Keep mpv open after file ends
keep-open

# Stop the screensaver while playing video
stop-screensaver=yes

# -----------------------------------------------------------------
# Protocol-Specific Configuration
# -----------------------------------------------------------------

[protocol.http]
  # Always create a video window even when playing audio-only streams
  force-window=yes
  # Enable caching and avoid pausing if cache runs low
  cache=yes
  no-cache-pause
  # Set a custom user-agent for HTTP streams
  user-agent='Mozilla/5.0 (X11; Linux x86_64; rv:55.0) Gecko/20100101 Firefox/55.0'

[protocol.https]
  force-window=yes
  cache=yes
  no-cache-pause
  user-agent='Mozilla/5.0 (X11; Linux x86_64; rv:55.0) Gecko/20100101 Firefox/55.0'

# -----------------------------------------------------------------
# Extension Configuration
# -----------------------------------------------------------------

[extension.gif]
  cache=no
  no-pause
  loop-file=yes

[extension.webm]
  cache=no
  no-pause
  loop-file=yes

# other
script-opts=ytdl_hook-ytdl_path=yt-dlp
